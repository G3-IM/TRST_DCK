<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Modello 3D</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      background: #f2f2f2; /* sfondo sito chiaro */
      overflow: hidden;
    }

    model-viewer {
      width: 100%;
      height: 100%;
      background-color: #f2f2f2 !important;

      /* forza il colore del canvas */
      --poster-color: #f2f2f2;
    }

    #progress {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 6px;
      background: #ccc;
    }

    #progress div {
      height: 100%;
      width: 0%;
      background: #333;
      transition: width 0.2s;
    }
  </style>
</head>

<body>

<model-viewer
  id="viewer"
  src="./TRST_DCK_EXI_ARC_000.glb"

  camera-controls
  interaction-prompt="none"

  /* ILLUMINAZIONE */
  environment-image="neutral"
  skybox-image="none"
  exposure="1.15"
  tone-mapping="aces"
  shadow-intensity="0.5"
  shadow-softness="0.8"

  loading="eager"
  reveal="auto"
>
</model-viewer>

<div id="progress"><div></div></div>

<script>
const viewer = document.querySelector('#viewer');
const progressBar = document.querySelector('#progress div');

let isDragging = false;
let lastX = 0;

/* Loader */
viewer.addEventListener('progress', (event) => {
  const progress = event.detail.totalProgress * 100;
  progressBar.style.width = progress + '%';
  if (progress === 100) {
    document.getElementById('progress').style.display = 'none';
  }
});

/* Mouse */
viewer.addEventListener('mousedown', e => {
  isDragging = true;
  lastX = e.clientX;
});

window.addEventListener('mouseup', () => {
